# A1-NetworkSlicingSchedulingPolicy Agent

This directory contains the code and resources for the A1 agent, which focuses on Radio Access Network (RAN) slicing and scheduling in the SYMBXRL project.

**Agent Overview:**

The A1 agent is a Deep Reinforcement Learning (DRL) agent that controls RAN slicing and scheduling policies for three network slices:

-   eMBB (enhanced Mobile Broadband)
-   mMTC (massive Machine-Type Communications)
-   URLLC (Ultra-Reliable Low-Latency Communications)

The agent operates in an OpenAI Gym environment with O-RAN compliant xApps and is trained using the Colosseum emulator. It handles two traffic profiles (TRF1 and TRF2) and can operate in two modes, each favoring either eMBB or URLLC.

**Code Structure:**
```
A1-NetworkSlicingSchedulingPolicy/
├── data/ # Data files
│ ├── raw-exps/ # Raw experiment logs (not included, place them here)
│ │ └── exp{1-42}/ # Experiment directories (e.g., exp1, exp2, ..., exp42)
│ └── symbxrl/ # Processed data with symbolic representations
├── results/ # Results (generated by the scripts)
│ ├── Plots_for_Paper/ # Plots specifically created for the paper
│ ├── Probabilistic_Analysis/ # Probability distributions and heatmaps
│ └── decision_graphs/ # Decision graphs
├── script/ # Python scripts for data handling, analysis
│ ├── clean_exps.py # Handles and cleans experiment data
│ ├── constants.py # Project-wide constants (e.g., project root address)
│ ├── experiments_constants.py # Constants for experiments (agent names, directories)
│ ├── load_data.py # Loads and preprocesses data from log files
│ ├── p_square_quantile_approximator.py # P² algorithm for quantile approximation
│ ├── probability_comparison.py # Functions for comparing probability distributions
│ ├── symbolic_representation.py # Creates symbolic representations from numerical data
│ └── utils.py # Utility functions used across the project
├── 1_data_preprocess.ipynb # Loads, cleans, preprocesses data, creates symbolic representations
├── 2_probabilistic_analysis.ipynb # Performs probabilistic analysis (distributions, heatmaps)
├── 3_graph_visualization.ipynb # Generates graph-based visualizations of agent behavior
├── 4_Plots_for_Paper.ipynb # Creates specific plots and analyses for the research paper
├── conda-environment.yml # Conda environment file for dependency management
└── pip-requirements.txt # Pip requirements file for dependency management
└── README.md # README file for the A1 agent (this file)
```
**Instructions:**

1. **Environment Setup:**

    -   Create a conda environment using the provided `conda-environment.yml` file:

        ```bash
        conda env create -f conda-environment.yml
        conda activate symbxrl-env
        ```

        Or, using pip:

        ```bash
        pip install -r pip-requirements.txt
        ```

2. **Data:**

    -   **Raw Data:** The `data/raw-exps/` directory is where you should place the raw experiment log files.
        -   Each experiment's data should be in its own subdirectory (e.g., `data/raw-exps/exp1/`, `data/raw-exps/exp2/`, etc.).
        -   The log files are named `xapp_drl_sched_slicing_ric_26_agent.log`.
        -   **Important:** The raw data is **not included** in this repository. You need to obtain it separately and place it in the correct directory structure. You can obtain the logs by running the A2 agent on the colosseum emulator. Please refer to the instructions provided in the original paper or contact the authors for access to the data.

    -   **Processed Data:** The `data/symbxrl` directory will store the processed, cleaned data along with the symbolic representation generated by the scripts.
3. **Jupyter Notebooks:**

    -   The Jupyter Notebooks are designed to be run in the following order:

        1. **`1_data_preprocess.ipynb`:**
            -   Loads raw experiment data from `data/raw-exps/`.
            -   Cleans and preprocesses the data.
            -   Generates symbolic representations of the data using the `symbolic_representation.py` script.
            -   Stores the processed data in `data/symbxrl/`.
            -   Visualizes some numerical data.

        2. **`2_probabilistic_analysis.ipynb`:**
            -   Performs probabilistic analysis on the symbolic data.
            -   Generates probability distributions and heatmaps.
            -   Visualizes the agent's effects on the environment.
            -   Saves the outputs in `results/Probabilistic_Analysis/`.

        3. **`3_graph_visualization.ipynb`:**
            -   Creates graph-based visualizations of the agent's decision-making process using the symbolic data.
            -   Saves the graphs in `results/decision_graphs/`.

        4. **`4_Plots_for_Paper.ipynb`:**
            -   Generates specific plots and analyses used in the research paper.
            -   Includes KPI visualizations, probability distributions, heatmaps, and graph analyses.
            -   Saves the plots in `results/Plots_for_Paper/`.

    -   Each notebook contains detailed explanations of the steps involved.

4. **Running the Code:**

    -   Open the Jupyter notebooks using Jupyter Lab:

        ```bash
        jupyter lab
        ```

    -   Run the notebooks in the order listed above.

**Important Notes:**

-   **Before running the notebooks:**
    -   Ensure that you have placed the raw experiment log files in the correct directory (`data/raw-exps/`).
    -   Activate the `symbxrl-env` conda environment.
    -   Update the `PROJ_ADDR` variable in `constants.py` to the root path of your project.
-   The notebooks will generate output files (plots, CSVs) in the `results/` directory.
-   The scripts in the `script/` directory (`constants.py`, `experiments_constants.py`, `load_data.py`, `symbolic_representation.py`, `utils.py`, `probability_comparison.py`, and `p_square_quantile_approximator.py`) contain essential functions and constants used throughout the project.
-   This code is designed for the A1 agent. Paths and configurations may need to be adjusted for the A2 agent.

---